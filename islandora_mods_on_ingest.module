<?php

/**
 * Implements hook_form_alter().
 * _____//Trying to add the choice of mods upload or edit xml form...____
 */
function islandora_mods_on_ingest_form_alter($form, &$form_state, $form_id) {
  $ingest = $form_id == 'islandora_ingest_form';
  if ($ingest) {
    $first = $form_state['islandora']['step_id'] == 'islandora_basic_collection_select_content_model';
    dpm($form_state['islandora']['step_id']);
    if($first){
      // $form['choose'] = array(
      //   '#type' => 'select',
      //   '#options' => array('Upload MODS file','Edit Metadata in form')
      // );
    }
  }
  //it returns, but why does it not render?
  //because the variable $form comes from islandora_ingest_form...
  return $form;
}

/**
 * Implements hook_form_FORM_ID_alter
 * ____//returns but does not render._____
 */
function islandora_mods_on_ingest_form_islandora_basic_collection_select_content_model_form_alter($form, &$form_state, $form_id) {
  $form['choose'] = array(
    '#type' => 'select',
    '#title' => t('Choose Upload or Edit Form.'),
    '#default' => '0',
    '#options' => array('Upload','Edit Form')
  );
  return $form;
}

/**
 * Implements hook_islandora_ingest_steps().
 * ____//this works great, and is how we would insert our form for mods upload to the steps...____
 */
function islandora_mods_on_ingest_islandora_ingest_steps(array &$form_state) {
  return array(
    'islandora_mods_on_ingest' => array(
      'weight' => -40,
      'type' => 'form',
      'form_id' => 'islandora_mods_on_ingest_form',
      'module' => 'islandora_mods_on_ingest',
      'file' => 'includes/mods_step.form.inc',
    ),
  );
}
